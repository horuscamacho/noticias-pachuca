# Web Scraping Flow Diagrams
## Visual Reference for Understanding the System

**Date:** October 21, 2025
**Related Docs**: SCRAPING_ARCHITECTURE_ANALYSIS.md, ANTI_DETECTION_INTEGRATION_PLAN.md

---

## 1. Current Scraping Flow (Before Enhancement)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  URL DISCOVERY SOURCES                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Facebook   â”‚    â”‚  News Site   â”‚    â”‚    Manual    â”‚ â”‚
â”‚  â”‚    Posts     â”‚    â”‚   Listings   â”‚    â”‚    Entry     â”‚ â”‚
â”‚  â”‚  (RapidAPI)  â”‚    â”‚  (Generator) â”‚    â”‚   (Admin)    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                   â”‚                    â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚                    â”‚
          â–¼                   â–¼                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  URL DETECTION & STORAGE                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  UrlDetectionService          UrlExtractionService          â”‚
â”‚  â”œâ”€ Extract URLs from posts   â”œâ”€ Fetch listing pages        â”‚
â”‚  â”œâ”€ Domain categorization     â”œâ”€ Parse article links        â”‚
â”‚  â””â”€ Store in ExternalUrl      â””â”€ SHA-256 deduplication      â”‚
â”‚                                                              â”‚
â”‚  MongoDB Collections:                                        â”‚
â”‚  â”œâ”€ externalurls (manual config needed)                     â”‚
â”‚  â””â”€ extractedurltrackings (generator-pro)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               CONFIGURATION MANAGEMENT                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Noticias Config    â”‚    â”‚ Generator-Pro Configâ”‚        â”‚
â”‚  â”‚  (Manual Selectors) â”‚    â”‚  (Auto Pipeline)    â”‚        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚ â€¢ Domain            â”‚    â”‚ â€¢ Base URL          â”‚        â”‚
â”‚  â”‚ â€¢ CSS Selectors     â”‚    â”‚ â€¢ Listing Selectors â”‚        â”‚
â”‚  â”‚ â€¢ Custom Headers    â”‚    â”‚ â€¢ Content Selectors â”‚        â”‚
â”‚  â”‚ â€¢ Rate Limits       â”‚    â”‚ â€¢ Frequencies       â”‚        â”‚
â”‚  â”‚ â€¢ Test Results      â”‚    â”‚ â€¢ AI Template       â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                              â”‚
â”‚  Status: Active / Testing                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   BULL QUEUE SYSTEM                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Queue: noticias-extraction                                 â”‚
â”‚  â”œâ”€ Job Type: extract-noticia                               â”‚
â”‚  â”œâ”€ Priority: Normal                                        â”‚
â”‚  â”œâ”€ Retry: 3 attempts                                       â”‚
â”‚  â””â”€ Concurrency: 5                                          â”‚
â”‚                                                              â”‚
â”‚  Queue: generator-pro-extraction                            â”‚
â”‚  â”œâ”€ Job Type: extract_urls, extract_content                â”‚
â”‚  â”œâ”€ Priority: High (fresh URLs)                             â”‚
â”‚  â”œâ”€ Retry: 5 attempts                                       â”‚
â”‚  â””â”€ Concurrency: 10                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             SCRAPING EXECUTION (CURRENT)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  NoticiasScrapingService / NewsWebsiteService               â”‚
â”‚                                                              â”‚
â”‚  Step 1: Cache Check                                        â”‚
â”‚  â”œâ”€ Generate SHA-256 key (url + selectors)                  â”‚
â”‚  â”œâ”€ Query Redis cache (30-min TTL)                          â”‚
â”‚  â””â”€ If HIT â†’ Return cached result                           â”‚
â”‚                                                              â”‚
â”‚  Step 2: Rate Limiting                                      â”‚
â”‚  â”œâ”€ Check domain rate limit (Redis counter)                 â”‚
â”‚  â””â”€ Throw error if exceeded                                 â”‚
â”‚                                                              â”‚
â”‚  Step 3: Method Selection                                   â”‚
â”‚  â”œâ”€ If useJavaScript = false â†’ Cheerio                      â”‚
â”‚  â””â”€ If useJavaScript = true â†’ Puppeteer                     â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  CHEERIO PATH     â”‚         â”‚  PUPPETEER PATH  â”‚        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚ 1. HTTP GET       â”‚         â”‚ 1. Browser Pool  â”‚        â”‚
â”‚  â”‚    (axios)        â”‚         â”‚    (max 5)       â”‚        â”‚
â”‚  â”‚ 2. Random UA      â”‚         â”‚ 2. Launch/Reuse  â”‚        â”‚
â”‚  â”‚ 3. Headers        â”‚         â”‚ 3. Random UA     â”‚        â”‚
â”‚  â”‚ 4. Timeout: 30s   â”‚         â”‚ 4. Block assets  â”‚        â”‚
â”‚  â”‚ 5. Parse HTML     â”‚         â”‚ 5. Render JS     â”‚        â”‚
â”‚  â”‚ 6. Extract data   â”‚         â”‚ 6. Extract HTML  â”‚        â”‚
â”‚  â”‚                   â”‚         â”‚ 7. Parse         â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚          â”‚                           â”‚                      â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                      â–¼                                       â”‚
â”‚  Step 4: Content Extraction                                 â”‚
â”‚  â”œâ”€ Title: $(selector).text()                               â”‚
â”‚  â”œâ”€ Content: $(selector).text() + cleaning                  â”‚
â”‚  â”œâ”€ Images: src, data-src, background-image                 â”‚
â”‚  â”œâ”€ Date: Parse to Date object                              â”‚
â”‚  â”œâ”€ Author, Categories, Tags                                â”‚
â”‚  â””â”€ Keywords: Frequency analysis (stop words removed)       â”‚
â”‚                                                              â”‚
â”‚  Step 5: Quality Check                                      â”‚
â”‚  â”œâ”€ Title length (high/medium/low)                          â”‚
â”‚  â”œâ”€ Content length (min 100 chars)                          â”‚
â”‚  â”œâ”€ Completeness score (0-100)                              â”‚
â”‚  â””â”€ Confidence score (0-100)                                â”‚
â”‚                                                              â”‚
â”‚  Current Anti-Detection:                                    â”‚
â”‚  âœ… User-Agent rotation (5 UAs, 2024 versions)              â”‚
â”‚  âœ… Rate limiting (domain-specific)                         â”‚
â”‚  âœ… Cache strategy (reduces requests)                       â”‚
â”‚  âœ… Random delays (configurable)                            â”‚
â”‚  âœ… Robots.txt respect (optional)                           â”‚
â”‚  âŒ No proxy rotation                                       â”‚
â”‚  âŒ No TLS fingerprinting fixes                             â”‚
â”‚  âŒ No advanced browser fingerprinting                      â”‚
â”‚  âŒ No CAPTCHA solving                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   DATA STORAGE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  MongoDB: extractednoticias                                 â”‚
â”‚  â”œâ”€ sourceUrl, domain, title, content                       â”‚
â”‚  â”œâ”€ images[], author, categories[], tags[], keywords[]      â”‚
â”‚  â”œâ”€ extractedAt, status ('extracted')                       â”‚
â”‚  â”œâ”€ extractionMetadata (method, time, success)              â”‚
â”‚  â”œâ”€ qualityMetrics (completeness, confidence)               â”‚
â”‚  â””â”€ rawData (full scraping result)                          â”‚
â”‚                                                              â”‚
â”‚  MongoDB: noticiasextractionlogs                            â”‚
â”‚  â””â”€ Detailed logging for debugging                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 NEXT PIPELINE STAGES                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Generator-Pro Only:                                        â”‚
â”‚  â”œâ”€ AI Content Generation (OpenAI/Anthropic)                â”‚
â”‚  â”œâ”€ Multi-Platform Publishing                               â”‚
â”‚  â”‚  â”œâ”€ Public Website                                       â”‚
â”‚  â”‚  â”œâ”€ Facebook Pages                                       â”‚
â”‚  â”‚  â”œâ”€ Twitter                                              â”‚
â”‚  â”‚  â””â”€ Mobile App Notifications                             â”‚
â”‚  â””â”€ Analytics & Tracking                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Current Success Rate: ~70%
Cloudflare Bypass: ~0%
Average Extraction Time: 5-10 seconds
```

---

## 2. Enhanced Scraping Flow (After Implementation)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  URL DISCOVERY SOURCES                      â”‚
â”‚                    (UNCHANGED)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            ENHANCED CONFIGURATION MANAGEMENT                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  NEW: ScrapingConfig (Global Settings)                      â”‚
â”‚  â”œâ”€ Proxy tiers (datacenter/residential/mobile)             â”‚
â”‚  â”œâ”€ CAPTCHA solver credentials                              â”‚
â”‚  â”œâ”€ Rate limit strategies                                   â”‚
â”‚  â”œâ”€ Fallback chain configuration                            â”‚
â”‚  â””â”€ Cost budgets & alerts                                   â”‚
â”‚                                                              â”‚
â”‚  Enhanced Domain Configs:                                   â”‚
â”‚  â”œâ”€ Anti-detection level (low/medium/high)                  â”‚
â”‚  â”œâ”€ Required proxy tier                                     â”‚
â”‚  â”œâ”€ CAPTCHA frequency estimate                              â”‚
â”‚  â””â”€ Historical success rate tracking                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             ENHANCED BULL QUEUE SYSTEM                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  NEW: Priority Queues                                       â”‚
â”‚  â”œâ”€ Priority 1 (High): Fresh URLs, time-sensitive           â”‚
â”‚  â”œâ”€ Priority 2 (Normal): Regular scraping                   â”‚
â”‚  â”œâ”€ Priority 3 (Low): Re-extraction, archive                â”‚
â”‚  â””â”€ Priority 4 (Fallback): ScraperAPI queue                 â”‚
â”‚                                                              â”‚
â”‚  Enhanced Retry Strategy:                                   â”‚
â”‚  â”œâ”€ Attempt 1: Cheerio (no proxy)                           â”‚
â”‚  â”œâ”€ Attempt 2: Rebrowser + datacenter proxy                 â”‚
â”‚  â”œâ”€ Attempt 3: Crawlee + residential proxy                  â”‚
â”‚  â”œâ”€ Attempt 4: ScraperAPI (guaranteed success)              â”‚
â”‚  â””â”€ Exponential backoff: 2s â†’ 4s â†’ 8s â†’ 16s                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        NEW: ADVANCED SCRAPING SERVICE (CORE)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Entry Point: AdvancedScrapingService.scrape()              â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  STEP 1: PRE-SCRAPING CHECKS                     â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚                                                   â”‚      â”‚
â”‚  â”‚  1.1 Rate Limiter Service                        â”‚      â”‚
â”‚  â”‚  â”œâ”€ Domain-specific limits (Bottleneck)          â”‚      â”‚
â”‚  â”‚  â”œâ”€ Adaptive backoff on failures                 â”‚      â”‚
â”‚  â”‚  â””â”€ Queue if limit exceeded                      â”‚      â”‚
â”‚  â”‚                                                   â”‚      â”‚
â”‚  â”‚  1.2 Metrics Service Check                       â”‚      â”‚
â”‚  â”‚  â”œâ”€ Get domain success rate history              â”‚      â”‚
â”‚  â”‚  â”œâ”€ Identify protection type (Cloudflare/etc)    â”‚      â”‚
â”‚  â”‚  â””â”€ Determine optimal method                     â”‚      â”‚
â”‚  â”‚                                                   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                               â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  STEP 2: RESOURCE PREPARATION                    â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚                                                   â”‚      â”‚
â”‚  â”‚  2.1 Proxy Configuration Service                 â”‚      â”‚
â”‚  â”‚  â”œâ”€ Determine required tier (tiered escalation)  â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€ Check domain failure history              â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€ Start: datacenter (cheap)                 â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€ Escalate: residential (blocked)           â”‚      â”‚
â”‚  â”‚  â”‚  â””â”€ Max: mobile (heavy protection)            â”‚      â”‚
â”‚  â”‚  â”œâ”€ Round-robin with health checks               â”‚      â”‚
â”‚  â”‚  â””â”€ Track proxy performance metrics              â”‚      â”‚
â”‚  â”‚                                                   â”‚      â”‚
â”‚  â”‚  2.2 Fingerprint Generator Service               â”‚      â”‚
â”‚  â”‚  â”œâ”€ Generate realistic browser fingerprint       â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€ User-Agent (Chrome 131 / Firefox 133)     â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€ Sec-CH-UA Client Hints (2025 standard)    â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€ Platform, viewport, screen resolution     â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€ WebGL renderer, Canvas fingerprint        â”‚      â”‚
â”‚  â”‚  â”‚  â””â”€ Timezone, language, plugins               â”‚      â”‚
â”‚  â”‚  â””â”€ Rotate fingerprints (hourly)                 â”‚      â”‚
â”‚  â”‚                                                   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                               â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  STEP 3: SCRAPING EXECUTION (FALLBACK CHAIN)    â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚                                                   â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â”‚
â”‚  â”‚  â”‚  METHOD 1: CHEERIO (Static HTML)        â”‚    â”‚      â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚      â”‚
â”‚  â”‚  â”‚  Cost: $0                                â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  Speed: 0.5-1 second                     â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  Success Rate: 90% (simple sites)        â”‚    â”‚      â”‚
â”‚  â”‚  â”‚                                          â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ HTTP GET with axios                   â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Connection pooling (100 sockets)      â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Modern User-Agent (2025)              â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Sec-CH-UA headers                     â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Optional proxy                        â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Parse with cheerio                    â”‚    â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â”‚
â”‚  â”‚         â”‚                                        â”‚      â”‚
â”‚  â”‚         â”‚ FAIL (403/429/timeout)                 â”‚      â”‚
â”‚  â”‚         â–¼                                        â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â”‚
â”‚  â”‚  â”‚  METHOD 2: REBROWSER (Cloudflare Bypass)â”‚    â”‚      â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚      â”‚
â”‚  â”‚  â”‚  Cost: ~$0.001 (proxy)                   â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  Speed: 3-5 seconds                      â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  Success Rate: 85% (Cloudflare sites)    â”‚    â”‚      â”‚
â”‚  â”‚  â”‚                                          â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ rebrowser-puppeteer-core              â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Patches Runtime.Enable CDP leak       â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Residential/datacenter proxy          â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Apply fingerprint to page             â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Modern headers (Sec-CH-UA)            â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Human-like delays (1-3 seconds)       â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ CAPTCHA detection & solving           â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Extract rendered HTML                 â”‚    â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â”‚
â”‚  â”‚         â”‚                                        â”‚      â”‚
â”‚  â”‚         â”‚ FAIL (CAPTCHA unsolved/DataDome)       â”‚      â”‚
â”‚  â”‚         â–¼                                        â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â”‚
â”‚  â”‚  â”‚  METHOD 3: CRAWLEE (Max Automation)     â”‚    â”‚      â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚      â”‚
â”‚  â”‚  â”‚  Cost: ~$0.002 (premium proxy)           â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  Speed: 4-6 seconds                      â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  Success Rate: 88% (most sites)          â”‚    â”‚      â”‚
â”‚  â”‚  â”‚                                          â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ PlaywrightCrawler / PuppeteerCrawler  â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Built-in anti-detection               â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Auto-fingerprint generation           â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Residential proxy                     â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Smart retry logic                     â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Session management                    â”‚    â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â”‚
â”‚  â”‚         â”‚                                        â”‚      â”‚
â”‚  â”‚         â”‚ FAIL (DataDome/PerimeterX)             â”‚      â”‚
â”‚  â”‚         â–¼                                        â”‚      â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚      â”‚
â”‚  â”‚  â”‚  METHOD 4: SCRAPERAPI (Guaranteed)      â”‚    â”‚      â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚      â”‚
â”‚  â”‚  â”‚  Cost: $0.01 per request                 â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  Speed: 5-10 seconds                     â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  Success Rate: 99% (all sites)           â”‚    â”‚      â”‚
â”‚  â”‚  â”‚                                          â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Commercial API fallback               â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Managed proxy pool                    â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Auto-CAPTCHA solving                  â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ JavaScript rendering                  â”‚    â”‚      â”‚
â”‚  â”‚  â”‚  â€¢ Guaranteed success (SLA-backed)       â”‚    â”‚      â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚      â”‚
â”‚  â”‚                                                  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                               â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  STEP 4: CAPTCHA HANDLING (IF ENCOUNTERED)      â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚                                                   â”‚      â”‚
â”‚  â”‚  4.1 CAPTCHA Solver Service                      â”‚      â”‚
â”‚  â”‚  â”œâ”€ Detect CAPTCHA type                          â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€ reCAPTCHA v2/v3                           â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€ hCaptcha                                  â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€ Cloudflare Turnstile                      â”‚      â”‚
â”‚  â”‚  â”‚  â””â”€ DataDome                                  â”‚      â”‚
â”‚  â”‚  â”œâ”€ Solve with service (2Captcha/NoCaptchaAI)    â”‚      â”‚
â”‚  â”‚  â”œâ”€ Inject solution into page                    â”‚      â”‚
â”‚  â”‚  â””â”€ Track cost & success rate                    â”‚      â”‚
â”‚  â”‚                                                   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                               â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  STEP 5: CONTENT EXTRACTION & QUALITY CHECK      â”‚      â”‚
â”‚  â”‚              (SAME AS CURRENT)                    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                               â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  STEP 6: METRICS & COST TRACKING                â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚                                                   â”‚      â”‚
â”‚  â”‚  6.1 Scraping Metrics Service                    â”‚      â”‚
â”‚  â”‚  â”œâ”€ Record success/failure                       â”‚      â”‚
â”‚  â”‚  â”œâ”€ Track method used                            â”‚      â”‚
â”‚  â”‚  â”œâ”€ Log processing time                          â”‚      â”‚
â”‚  â”‚  â”œâ”€ Identify block reason                        â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€ Cloudflare challenge                      â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€ DataDome block                            â”‚      â”‚
â”‚  â”‚  â”‚  â”œâ”€ CAPTCHA encountered                       â”‚      â”‚
â”‚  â”‚  â”‚  â””â”€ Rate limit / timeout                      â”‚      â”‚
â”‚  â”‚  â””â”€ Update domain protection profile             â”‚      â”‚
â”‚  â”‚                                                   â”‚      â”‚
â”‚  â”‚  6.2 Cost Tracking                               â”‚      â”‚
â”‚  â”‚  â”œâ”€ Proxy usage ($0.001-0.01 per request)        â”‚      â”‚
â”‚  â”‚  â”œâ”€ CAPTCHA solving ($0.50-1.00 per solve)       â”‚      â”‚
â”‚  â”‚  â”œâ”€ ScraperAPI calls ($0.01 per request)         â”‚      â”‚
â”‚  â”‚  â””â”€ Alert if monthly budget exceeded             â”‚      â”‚
â”‚  â”‚                                                   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              ENHANCED DATA STORAGE                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  MongoDB: extractednoticias (EXTENDED)                      â”‚
â”‚  â””â”€ NEW: extractionMetadata                                 â”‚
â”‚     â”œâ”€ blockedByCloudflare: boolean                         â”‚
â”‚     â”œâ”€ blockedByDataDome: boolean                           â”‚
â”‚     â”œâ”€ captchaEncountered: boolean                          â”‚
â”‚     â”œâ”€ captchaSolved: boolean                               â”‚
â”‚     â”œâ”€ proxyUsed: string                                    â”‚
â”‚     â”œâ”€ proxyType: 'datacenter' | 'residential' | 'mobile'   â”‚
â”‚     â”œâ”€ scrapeAttempts: number                               â”‚
â”‚     â””â”€ totalCost: number (USD)                              â”‚
â”‚                                                              â”‚
â”‚  NEW MongoDB: proxyusagelogs                                â”‚
â”‚  â”œâ”€ proxyUrl, targetDomain, success, responseTime           â”‚
â”‚  â””â”€ Used for proxy health monitoring                        â”‚
â”‚                                                              â”‚
â”‚  NEW MongoDB: captchaencounters                             â”‚
â”‚  â”œâ”€ url, captchaType, solvingMethod, cost                   â”‚
â”‚  â””â”€ Used for cost optimization                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             MONITORING & ALERTING DASHBOARD                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Real-Time Metrics:                                         â”‚
â”‚  â”œâ”€ Overall success rate: 92.5% âœ…                          â”‚
â”‚  â”œâ”€ Cloudflare bypass rate: 87.3% âœ…                        â”‚
â”‚  â”œâ”€ Average extraction time: 3.2 seconds                    â”‚
â”‚  â”œâ”€ Cost this month: $87.45 / $150 budget                   â”‚
â”‚  â”‚                                                           â”‚
â”‚  â”‚  Breakdown:                                              â”‚
â”‚  â”‚  â”œâ”€ Proxies: $45.20                                      â”‚
â”‚  â”‚  â”œâ”€ CAPTCHA: $28.15                                      â”‚
â”‚  â”‚  â””â”€ ScraperAPI: $14.10                                   â”‚
â”‚  â”‚                                                           â”‚
â”‚  â””â”€ Active proxies: 23/25 healthy                           â”‚
â”‚                                                              â”‚
â”‚  Alerts:                                                    â”‚
â”‚  â”œâ”€ Domain failure spike: ejemplo.com (>50% fail) ğŸ”´        â”‚
â”‚  â”œâ”€ Proxy pool low: datacenter tier (2 healthy) âš ï¸          â”‚
â”‚  â””â”€ Budget warning: 58% of monthly limit used ğŸŸ¡            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Enhanced Success Rate: ~92%
Cloudflare Bypass: ~87%
Average Extraction Time: 3-5 seconds
Monthly Cost: $50-150 (mid-range)
```

---

## 3. Proxy Tier Escalation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             ADAPTIVE PROXY TIER ESCALATION                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

START: New URL to scrape
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check Domain History                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Query: DomainMetrics (last 30 days)    â”‚
â”‚  â”œâ”€ Total attempts                      â”‚
â”‚  â”œâ”€ Success rate                        â”‚
â”‚  â”œâ”€ Block patterns                      â”‚
â”‚  â”‚  â”œâ”€ Cloudflare blocks                â”‚
â”‚  â”‚  â”œâ”€ DataDome blocks                  â”‚
â”‚  â”‚  â”œâ”€ CAPTCHA frequency                â”‚
â”‚  â”‚  â””â”€ Rate limit hits                  â”‚
â”‚  â””â”€ Last successful proxy tier          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Decision Tree  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚         â”‚         â”‚
        â–¼         â–¼         â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Tier 0 â”‚ â”‚ Tier 1 â”‚ â”‚ Tier 2 â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  NONE  â”‚ â”‚  DATA  â”‚ â”‚  RESI  â”‚ â”‚ Tier 3 â”‚
   â”‚        â”‚ â”‚ CENTER â”‚ â”‚DENTIAL â”‚ â”‚ MOBILE â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜
        â”‚          â”‚          â”‚          â”‚
        â–¼          â–¼          â–¼          â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TIER 0: NO PROXY (Free)                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Conditions:                                                 â”‚
â”‚  â”œâ”€ Success rate > 85%                                       â”‚
â”‚  â”œâ”€ No protection detected                                   â”‚
â”‚  â””â”€ Simple news/blog sites                                   â”‚
â”‚                                                              â”‚
â”‚  Cost: $0                                                    â”‚
â”‚  Success Rate: 90%+                                          â”‚
â”‚  Speed: Fastest (0.5-1s)                                     â”‚
â”‚                                                              â”‚
â”‚  âœ… Use For:                                                 â”‚
â”‚  â”œâ”€ Local news sites                                         â”‚
â”‚  â”œâ”€ Blogs                                                    â”‚
â”‚  â”œâ”€ Government sites                                         â”‚
â”‚  â””â”€ Academic sites                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ FAIL (403/429)
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TIER 1: DATACENTER PROXIES (Cheap)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Conditions:                                                 â”‚
â”‚  â”œâ”€ Tier 0 failed OR                                         â”‚
â”‚  â”œâ”€ Success rate 50-85% OR                                   â”‚
â”‚  â”œâ”€ Light rate limiting detected                             â”‚
â”‚  â””â”€ Moderate traffic sites                                   â”‚
â”‚                                                              â”‚
â”‚  Cost: $0.001 per request (~$1/1000)                         â”‚
â”‚  Success Rate: 75-85%                                        â”‚
â”‚  Speed: Fast (1-2s)                                          â”‚
â”‚                                                              â”‚
â”‚  âœ… Use For:                                                 â”‚
â”‚  â”œâ”€ E-commerce sites (Amazon, eBay)                          â”‚
â”‚  â”œâ”€ News aggregators                                         â”‚
â”‚  â”œâ”€ Job boards                                               â”‚
â”‚  â””â”€ Review sites                                             â”‚
â”‚                                                              â”‚
â”‚  Proxy Pool:                                                 â”‚
â”‚  â”œâ”€ ProxyWing datacenter ($1.05/month unlimited)             â”‚
â”‚  â”œâ”€ Webshare datacenter (10 free proxies)                    â”‚
â”‚  â””â”€ Smartproxy datacenter ($0.70/GB)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ FAIL (Cloudflare/DataDome)
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TIER 2: RESIDENTIAL PROXIES (Recommended)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Conditions:                                                 â”‚
â”‚  â”œâ”€ Tier 1 failed OR                                         â”‚
â”‚  â”œâ”€ Cloudflare challenge detected OR                         â”‚
â”‚  â”œâ”€ Success rate < 50% OR                                    â”‚
â”‚  â”œâ”€ CAPTCHA encountered frequently                           â”‚
â”‚  â””â”€ Protected sites                                          â”‚
â”‚                                                              â”‚
â”‚  Cost: $0.003-0.005 per request (~$3-5/1000)                 â”‚
â”‚  Success Rate: 85-95%                                        â”‚
â”‚  Speed: Moderate (3-5s)                                      â”‚
â”‚                                                              â”‚
â”‚  âœ… Use For:                                                 â”‚
â”‚  â”œâ”€ Social media (Facebook, Twitter)                         â”‚
â”‚  â”œâ”€ Cloudflare-protected sites                               â”‚
â”‚  â”œâ”€ Travel booking sites                                     â”‚
â”‚  â”œâ”€ Sneaker/ticket sites                                     â”‚
â”‚  â””â”€ Financial data sites                                     â”‚
â”‚                                                              â”‚
â”‚  Proxy Pool:                                                 â”‚
â”‚  â”œâ”€ ProxyWing residential ($2.50/GB)                         â”‚
â”‚  â”œâ”€ Smartproxy residential ($3.50/GB)                        â”‚
â”‚  â””â”€ IPRoyal residential ($2.80/GB)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ FAIL (DataDome/PerimeterX)
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TIER 3: MOBILE PROXIES (Premium)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Conditions:                                                 â”‚
â”‚  â”œâ”€ Tier 2 failed OR                                         â”‚
â”‚  â”œâ”€ DataDome/PerimeterX detected OR                          â”‚
â”‚  â”œâ”€ Success rate < 30% OR                                    â”‚
â”‚  â”œâ”€ Banking/high-security sites                              â”‚
â”‚  â””â”€ Last resort before ScraperAPI                            â”‚
â”‚                                                              â”‚
â”‚  Cost: $0.01-0.02 per request (~$10-20/1000)                 â”‚
â”‚  Success Rate: 95-99%                                        â”‚
â”‚  Speed: Slow (5-10s)                                         â”‚
â”‚                                                              â”‚
â”‚  âœ… Use For:                                                 â”‚
â”‚  â”œâ”€ Banking/financial sites                                  â”‚
â”‚  â”œâ”€ DataDome-protected sites                                 â”‚
â”‚  â”œâ”€ PerimeterX-protected sites                               â”‚
â”‚  â”œâ”€ Government verification                                  â”‚
â”‚  â””â”€ High-value target scraping                               â”‚
â”‚                                                              â”‚
â”‚  Proxy Pool:                                                 â”‚
â”‚  â”œâ”€ Smartproxy mobile ($8/GB)                                â”‚
â”‚  â”œâ”€ Bright Data mobile ($24/GB)                              â”‚
â”‚  â””â”€ Oxylabs mobile ($22/GB)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”‚ FAIL (Absolute last resort)
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FALLBACK: SCRAPERAPI (Guaranteed)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Cost: $0.01 per request (100,000 credits for $49/month)    â”‚
â”‚  Success Rate: 99%+                                          â”‚
â”‚  Speed: Variable (5-15s)                                     â”‚
â”‚                                                              â”‚
â”‚  âœ… Features:                                                â”‚
â”‚  â”œâ”€ Automatic proxy rotation                                â”‚
â”‚  â”œâ”€ CAPTCHA solving included                                â”‚
â”‚  â”œâ”€ JavaScript rendering                                    â”‚
â”‚  â”œâ”€ Geo-targeting                                            â”‚
â”‚  â””â”€ SLA-backed success guarantee                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ADAPTIVE LEARNING SYSTEM                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  After Each Scraping Attempt:                               â”‚
â”‚  â”œâ”€ Record: Domain, Tier Used, Success/Fail, Time, Cost     â”‚
â”‚  â”œâ”€ Update: Domain success rate by tier                     â”‚
â”‚  â”œâ”€ Learn: Optimal tier for each domain                     â”‚
â”‚  â””â”€ Adjust: Future tier selection for domain                â”‚
â”‚                                                              â”‚
â”‚  Example Learning:                                          â”‚
â”‚  Domain: cloudflare-protected-site.com                      â”‚
â”‚  â”œâ”€ Week 1: Tier 0 â†’ 10% success â†’ Escalate to Tier 1      â”‚
â”‚  â”œâ”€ Week 2: Tier 1 â†’ 40% success â†’ Escalate to Tier 2      â”‚
â”‚  â”œâ”€ Week 3: Tier 2 â†’ 92% success â†’ Lock to Tier 2          â”‚
â”‚  â””â”€ Week 4+: Always start at Tier 2 for this domain        â”‚
â”‚                                                              â”‚
â”‚  Cost Optimization:                                         â”‚
â”‚  â”œâ”€ Track: Cost per successful extraction                   â”‚
â”‚  â”œâ”€ Compare: Tier costs vs ScraperAPI                       â”‚
â”‚  â”œâ”€ Decision: If Tier 2 fails > 70%, use ScraperAPI        â”‚
â”‚  â””â”€ Blacklist: Domains with cost > $0.05/extraction         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. CAPTCHA Handling Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  CAPTCHA DETECTION & SOLVING                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

During Scraping (After Page Load):
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAPTCHA Detection                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Check for selectors:                   â”‚
â”‚  â”œâ”€ iframe[src*="recaptcha"]            â”‚
â”‚  â”œâ”€ iframe[src*="hcaptcha"]             â”‚
â”‚  â”œâ”€ .cf-turnstile                       â”‚
â”‚  â”œâ”€ #captcha-container                  â”‚
â”‚  â””â”€ .g-recaptcha                        â”‚
â”‚                                         â”‚
â”‚  OR check page content:                 â”‚
â”‚  â”œâ”€ "Verify you are human"              â”‚
â”‚  â”œâ”€ "Complete the CAPTCHA"              â”‚
â”‚  â””â”€ "Click to continue"                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  CAPTCHA Found?   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                 â”‚
        YES               NO
         â”‚                 â”‚
         â–¼                 â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Identify Typeâ”‚    â”‚   Continue   â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  Scraping    â”‚
         â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAPTCHA Type Identification            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  reCAPTCHA v2 (Image Selection) â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  Solve Method: 2Captcha          â”‚   â”‚
â”‚  â”‚  Cost: $1.00 per 1000            â”‚   â”‚
â”‚  â”‚  Time: 9-15 seconds              â”‚   â”‚
â”‚  â”‚  Success Rate: 99%               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                â”‚
â”‚         â–¼                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  reCAPTCHA v3 (Invisible)       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  Solve Method: NoCaptchaAI       â”‚   â”‚
â”‚  â”‚  Cost: $0.14 per 1000            â”‚   â”‚
â”‚  â”‚  Time: 2-5 seconds               â”‚   â”‚
â”‚  â”‚  Success Rate: 95%               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                â”‚
â”‚         â–¼                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  hCaptcha                       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  Solve Method: 2Captcha          â”‚   â”‚
â”‚  â”‚  Cost: $1.00 per 1000            â”‚   â”‚
â”‚  â”‚  Time: 10-20 seconds             â”‚   â”‚
â”‚  â”‚  Success Rate: 98%               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                â”‚
â”‚         â–¼                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Cloudflare Turnstile           â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  Solve Method: Rebrowser Auto    â”‚   â”‚
â”‚  â”‚  Cost: $0 (built-in)             â”‚   â”‚
â”‚  â”‚  Time: 3-8 seconds               â”‚   â”‚
â”‚  â”‚  Success Rate: 80%               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚         â”‚                                â”‚
â”‚         â–¼                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  DataDome CAPTCHA               â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  Solve Method: ScraperAPI        â”‚   â”‚
â”‚  â”‚  Cost: $0.01 (API call)          â”‚   â”‚
â”‚  â”‚  Time: 5-15 seconds              â”‚   â”‚
â”‚  â”‚  Success Rate: 95%               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CAPTCHA Solving Process                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚  Step 1: Extract CAPTCHA Parameters     â”‚
â”‚  â”œâ”€ Site key (for reCAPTCHA/hCaptcha)   â”‚
â”‚  â”œâ”€ Page URL                            â”‚
â”‚  â”œâ”€ Action (for reCAPTCHA v3)           â”‚
â”‚  â””â”€ s-token (for DataDome)              â”‚
â”‚                                         â”‚
â”‚  Step 2: Submit to Solving Service      â”‚
â”‚  â”œâ”€ API call to 2Captcha/NoCaptchaAI    â”‚
â”‚  â”œâ”€ Wait for task ID                    â”‚
â”‚  â””â”€ Poll for solution (every 2-5 sec)   â”‚
â”‚                                         â”‚
â”‚  Step 3: Inject Solution                â”‚
â”‚  â”œâ”€ Locate response field in page       â”‚
â”‚  â”œâ”€ Execute JavaScript injection         â”‚
â”‚  â”‚  Example:                             â”‚
â”‚  â”‚  document.getElementById(             â”‚
â”‚  â”‚    'g-recaptcha-response'             â”‚
â”‚  â”‚  ).innerHTML = 'TOKEN_HERE';          â”‚
â”‚  â””â”€ Submit form / trigger callback       â”‚
â”‚                                         â”‚
â”‚  Step 4: Verify Success                 â”‚
â”‚  â”œâ”€ Wait for page change                â”‚
â”‚  â”œâ”€ Check for CAPTCHA removal            â”‚
â”‚  â””â”€ Verify content is accessible         â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Solved?          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                 â”‚
        YES               NO
         â”‚                 â”‚
         â–¼                 â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Continue    â”‚    â”‚  Retry (Max  â”‚
  â”‚  Scraping    â”‚    â”‚  3 Attempts) â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ All retries failed
                             â–¼
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  Escalate    â”‚
                      â”‚  to Tier 3   â”‚
                      â”‚  Proxy or    â”‚
                      â”‚  ScraperAPI  â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CAPTCHA COST OPTIMIZATION                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Strategy 1: Avoid CAPTCHAs Proactively                     â”‚
â”‚  â”œâ”€ Use residential/mobile proxies                          â”‚
â”‚  â”œâ”€ Implement realistic delays                              â”‚
â”‚  â”œâ”€ Rotate fingerprints                                     â”‚
â”‚  â””â”€ Cache results longer (reduce requests)                  â”‚
â”‚                                                              â”‚
â”‚  Strategy 2: Choose Cheapest Solver                         â”‚
â”‚  â”œâ”€ reCAPTCHA v3: NoCaptchaAI ($0.14/1000)                  â”‚
â”‚  â”œâ”€ reCAPTCHA v2: 2Captcha ($1.00/1000)                     â”‚
â”‚  â””â”€ Cloudflare Turnstile: Rebrowser (free)                  â”‚
â”‚                                                              â”‚
â”‚  Strategy 3: Blacklist High-CAPTCHA Sites                   â”‚
â”‚  â”œâ”€ Track: CAPTCHA frequency per domain                     â”‚
â”‚  â”œâ”€ If > 80%: Use ScraperAPI directly                       â”‚
â”‚  â””â”€ Avoid wasting money on solving                          â”‚
â”‚                                                              â”‚
â”‚  Strategy 4: Budget Alerts                                  â”‚
â”‚  â”œâ”€ Monthly CAPTCHA budget: $30                             â”‚
â”‚  â”œâ”€ Alert at 70% usage ($21)                                â”‚
â”‚  â””â”€ Pause non-critical scraping if exceeded                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Monitoring & Metrics Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          SCRAPING METRICS DASHBOARD (Real-Time)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OVERALL SUCCESS METRICS     â”‚   COST TRACKING              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                              â”‚                              â”‚
â”‚  Overall Success Rate: 92.5% â”‚  This Month: $87.45          â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘    â”‚  Budget: $150.00             â”‚
â”‚                              â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘ 58%     â”‚
â”‚  Last 24 Hours: 89.2%        â”‚                              â”‚
â”‚  Last 7 Days: 87.8%          â”‚  Breakdown:                  â”‚
â”‚  Last 30 Days: 91.3%         â”‚  â”œâ”€ Proxies: $45.20 (52%)    â”‚
â”‚                              â”‚  â”œâ”€ CAPTCHA: $28.15 (32%)    â”‚
â”‚  Total Requests: 125,430     â”‚  â””â”€ ScraperAPI: $14.10 (16%) â”‚
â”‚  â”œâ”€ Successful: 116,024      â”‚                              â”‚
â”‚  â”œâ”€ Failed: 8,206            â”‚  Projected Monthly: $142.50  â”‚
â”‚  â””â”€ In Queue: 1,200          â”‚  âš ï¸ On track for budget      â”‚
â”‚                              â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SUCCESS RATE BY METHOD                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Cheerio (Static):     92.1%  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  78,234â”‚
â”‚  Rebrowser (CF):       85.7%  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  28,456 â”‚
â”‚  Crawlee (Advanced):   88.3%  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘  15,123  â”‚
â”‚  ScraperAPI (Fallback): 99.1% â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘   3,617  â”‚
â”‚                                                              â”‚
â”‚  Average Extraction Time: 3.2 seconds                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TOP DOMAINS BY VOLUME                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. ejemplo.com           15,234 req    95.2% success  âœ…   â”‚
â”‚  2. news-site.com         12,456 req    89.7% success  âœ…   â”‚
â”‚  3. cloudflare-site.com    8,123 req    65.3% success  âš ï¸   â”‚
â”‚  4. datadome-site.com      5,678 req    42.1% success  ğŸ”´   â”‚
â”‚  5. protected.com          3,456 req    78.4% success  ğŸŸ¡   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PROTECTION DETECTION (Last 7 Days)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Cloudflare Challenges:  2,345  (87.3% bypassed)            â”‚
â”‚  DataDome Blocks:          456  (42.1% bypassed)            â”‚
â”‚  reCAPTCHA Encountered:    234  (95.7% solved)              â”‚
â”‚  hCaptcha Encountered:      89  (98.9% solved)              â”‚
â”‚  Rate Limit 429:           123  (100% retried)              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PROXY HEALTH STATUS                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Datacenter Proxies:     8/10 healthy (80%)                 â”‚
â”‚  â”œâ”€ Average success: 85.3%                                  â”‚
â”‚  â”œâ”€ Average latency: 245ms                                  â”‚
â”‚  â””â”€ Unhealthy: proxy7.com, proxy10.com                      â”‚
â”‚                                                              â”‚
â”‚  Residential Proxies:    4/5 healthy (80%)                  â”‚
â”‚  â”œâ”€ Average success: 92.7%                                  â”‚
â”‚  â”œâ”€ Average latency: 567ms                                  â”‚
â”‚  â””â”€ Unhealthy: residential3.com                             â”‚
â”‚                                                              â”‚
â”‚  Mobile Proxies:         2/2 healthy (100%)                 â”‚
â”‚  â”œâ”€ Average success: 97.1%                                  â”‚
â”‚  â””â”€ Average latency: 1,234ms                                â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ACTIVE ALERTS                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  ğŸ”´ CRITICAL: datadome-site.com failure rate > 50%          â”‚
â”‚     Action: Switch to ScraperAPI for this domain            â”‚
â”‚                                                              â”‚
â”‚  âš ï¸ WARNING: Proxy pool low (datacenter tier: 2 healthy)    â”‚
â”‚     Action: Add more datacenter proxies or disable sick onesâ”‚
â”‚                                                              â”‚
â”‚  ğŸŸ¡ INFO: Budget at 58% of monthly limit                    â”‚
â”‚     Projected: $142.50 / $150 budget                        â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  COST PER SUCCESSFUL EXTRACTION (by tier)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  No Proxy (Tier 0):       $0.000  (cheapest)                â”‚
â”‚  Datacenter (Tier 1):     $0.001                            â”‚
â”‚  Residential (Tier 2):    $0.004                            â”‚
â”‚  Mobile (Tier 3):         $0.012                            â”‚
â”‚  ScraperAPI (Fallback):   $0.010  (guaranteed success)      â”‚
â”‚                                                              â”‚
â”‚  Overall Average: $0.0015 per successful extraction         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RECENT FAILURES (Last Hour)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  14:23 | cloudflare-site.com/article-123                    â”‚
â”‚         Cloudflare Challenge Failed (Tier 1)                â”‚
â”‚         Action: Escalated to Tier 2 (residential)           â”‚
â”‚                                                              â”‚
â”‚  14:18 | datadome-site.com/news-456                         â”‚
â”‚         DataDome Block (Tier 2)                             â”‚
â”‚         Action: Switched to ScraperAPI                      â”‚
â”‚                                                              â”‚
â”‚  14:12 | protected.com/page-789                             â”‚
â”‚         CAPTCHA Solve Timeout (2Captcha)                    â”‚
â”‚         Action: Retrying with NoCaptchaAI                   â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**End of Diagrams Document**

**Usage**: Reference these diagrams when implementing the anti-detection system to understand the complete flow and decision points.

**Related Documents**:
- Full analysis: `SCRAPING_ARCHITECTURE_ANALYSIS.md`
- Implementation plan: `ANTI_DETECTION_INTEGRATION_PLAN.md`
- Research: `/rotation_scraper_for_escape_blockers.md`
